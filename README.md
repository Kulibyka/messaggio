# messaggio

# Микросервис обработки сообщений

Этот микросервис предназначен для приема сообщений через HTTP API, сохранения их в PostgreSQL, отправки в Kafka для дальнейшей обработки и предоставления API для получения статистики по обработанным сообщениям.

## Функциональные возможности

- **Прием сообщений:** Прием сообщений через HTTP POST запросы.
- **Хранение:** Сохранение полученных сообщений в базе данных PostgreSQL.
- **Интеграция с Kafka:** Отправка сообщений в Kafka для обработки.
- **Обработка сообщений:** Пометка сообщений как обработанных после успешной обработки в Kafka.
- **API статистики:** Получение статистики по обработанным сообщениям.

## Используемые технологии

- **Go 1.22**
- **PostgreSQL 16.3**
- **Kafka 2.8.1**
- **Docker**

## Начало работы

### Предварительные требования

Убедитесь, что на вашей системе установлены следующие компоненты:

- Docker
- Docker Compose

### Запуск микросервиса

1. **Клонируйте репозиторий:**

   ```sh
   git clone https://github.com/yourusername/messagio.git
   cd messagio
   ```

2. **Соберите и запустите контейнеры Docker:**

   ```sh
   docker-compose up --build
   ```

   Эта команда запустит следующие сервисы:

    - PostgreSQL на порту `5432`
    - Zookeeper на порту `2181`
    - Kafka на порту `9092`
    - Приложение на порту `8080`

3. **Проверка работоспособности:**

    - Для проверки приема сообщений отправьте POST запрос на `http://localhost:8080/messages`.
    - Для получения статистики по обработанным сообщениям отправьте GET запрос на `http://localhost:8080/statistics`.

## Развертывание на сервере

Чтобы развернуть проект на сервере и сделать его доступным через интернет, выполните следующие шаги:

1. Убедитесь, что у вас настроена сеть, чтобы контейнеры могли быть доступны извне.
2. Настройте порты в файле `docker-compose.yml` и убедитесь, что они не конфликтуют с другими сервисами.
3. Используйте инструменты вроде Nginx для маршрутизации внешнего трафика на порты вашего приложения.

## Инструкция по подключению

- **HTTP API:** `http://your-server-address:8080/messages` для отправки сообщений и `http://your-server-address:8080/stats` для получения статистики.
- **PostgreSQL:** Доступен на порту `5432`, подключайтесь с помощью пользователя `postgres` и пароля `password`.
- **Kafka:** Брокер доступен на порту `9092`, Zookeeper на `2181`.

## Ссылки

- [Ссылка на развернутый проект](http://your-deployed-project-url)
- [Git репозиторий с кодом](https://github.com/yourusername/messagio)
```
